
<html>
  <head>
    <title>Installing current VXL</title>
  </head>

  <body bgcolor=white>
<a href="http://vxl.sourceforge.net/" border=0><img ALT="VXL" src="../logo1-quant.gif" align=right border=0></a>
    <h1>Installing the latest version of VXL</h1>
<br clear=all>
<hr>
<b>Contents:</b>
<a href="#cmake">[Installing CMake]</a>&nbsp;&nbsp;
<a href="#compile">[Compiling with CMake]</a>&nbsp;&nbsp;
<a href="#cmakecache">[CMakeCache.txt]</a>&nbsp;&nbsp;
<a href="#in-place">[In-place builds]</a>&nbsp;&nbsp;

<hr>
<a name = "cmake">
<h3>Get and install CMake</h3>

If you haven't already downloaded CMake then you will need to do this first. The CMake website is at 
<a href="http://public.kitware.com/CMake/">http://public.kitware.com/CMake/</a>. 
It is recommended that you get the sources using CVS. For more information see the section on "downloading" 
on the CMake webpage.  If you are happy using CVS then you can download CMake by using the following
commands:

<br><br>
&nbsp;&nbsp;   cvs -d :pserver:anonymous@public.kitware.com:/CMake/cvsroot login
<br>
(respond with password cmake)
<br>
&nbsp;&nbsp;   cvs -d :pserver:anonymous@public.kitware.com:/CMake/cvsroot co CMake
<br>
<br>

<b>With Visual Studio</b>, load CMakeSetup.dsw and compile the projects in
there. This will generate a program "CMakeSetup", which is what you
will run whenever I talk about running CMake.
<br>
<br>

<b>With Unix</b>, do a standard
  ./configure
  make
I suggest that you _not_ run "make install", because you will (should)
be updating CMake relatively often. In the following, I will use
$CMAKE to refer to the newly generated
binary. (CMAKE_DIR/Source/cmake, if you don't perform the install
step.)

Better yet, especially if you are going to build for more than one platform:
  cd CMAKE_DIR
  mkdir CMake-build-for-`uname`
  (or something like that: a platform-unique name)
  cd CMake-build-for-`uname`
  ../configure
  make
Now $CMAKE is CMAKE_DIR/CMake-build-for-`uname`/Source/cmake

<hr>
<a name = "compile">
<h3>Compiling with CMake</h3>

Use $VXLSRC to refer to the vxl source tree. (This is $IUEROOT in the
old make system.) Create a different directory $VXLBIN, one per platform,
and run CMake from within that directory.

<br><br>
<b>With Visual Studio,</b>
run CMakeSetup and enter $VXLSRC and $VXLBIN
appropriately. This will generate $VXLBIN/allvxl.dsw.  All 
VXL projects are included in this workspace and you should
be able to build them in the normal way for Visual Studio.


<br><br>
<b>With Unix:</b>
<br>
&nbsp;&nbsp;  cd $VXLBIN
<br>
&nbsp;&nbsp;  $CMAKE $VXLSRC

<br><br>
This will generate the makefiles within $VXLBIN. You can now do a
"make" to build everything, or else go to a project of interest and
run "make"--the dependent libraries should be automatically
built. Although the generated makefiles will work with most make
programs, it works best with GNU make.

<hr>
<a name = "cmakecache">
<h3>The CMakeCache.txt</h3>

The build system is configured by setting "cache" values, which are
specified in $VXLBIN/CMakeCache.txt. These values can be edited using
a plain old editor or using the CMake GUI. (There is apparently a
CMake GUI under Unix for those with FLTK.)

<br><br>
When running $CMAKE for the first time, sensible default values are
written into CMakeCache.txt, and you will not need changing any of
these if everything compiles and runs fine.  However, running $CMAKE
from a directory that already contains a CMakeCache.txt will use the
values in there, so it is worth having a look at the settings in that
file, e.g. for the location of JPEG, TIFF, etc.

<hr>
<a name = "in-place">
<h3>Doing an in-place build</h3>

If you don't make a new directory for $VXLBIN, but instead use
$VXLBIN=$VXLSRC, you will get an in-place build. The major
disadvantage is that you cannot have different build options, since
the build options are given in the CMakeCache.txt and there is only
one of those per build tree.
